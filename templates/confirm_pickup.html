<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Confirm Pickup</title>
  </head>
  <body>
    <h1>Confirm Pickup</h1>

    <p>Your session for <b>{{ machine_id }}</b> is active.</p>

    <hr>

    <div style="border:1px solid #999; padding:10px; margin-bottom:10px;">
      <strong>Session Details</strong><br><br>

      <p><b>Student:</b> {{ session["FIRSTNAME"] }} {{ session["LASTNAME"] }}</p>
      <p><b>Time In:</b> {{ session["TIMEIN"] }}</p>
      <p><b>Expected End:</b> {{ session["EXPECTED_END"] }}</p>

      {% if now_str is defined %}
        <p><b>Current Time:</b> {{ now_str }}</p>
      {% endif %}
    </div>

    <div style="border:1px solid #999; padding:10px; margin-bottom:10px;">
      <strong>Delay Preview (SC6)</strong><br><br>

      {% if late_by_min is defined %}
        <p><b>Late By:</b> {{ late_by_min }} min</p>
      {% endif %}

      {% if grace_min is defined %}
        <p><b>Grace Period:</b> {{ grace_min }} min</p>
      {% endif %}

      {% if delay_recorded is defined %}
        <p><b>Delay Recorded:</b> {{ delay_recorded }} min</p>
      {% endif %}

      {% if grace_min is defined %}
        <div style="margin-top:8px; font-size:0.95em;">
          Delay is recorded only after the grace period: <b>max(0, Late By âˆ’ {{ grace_min }})</b>.
        </div>
      {% endif %}
    </div>

    <form method="post" action="/session/{{ session['SESSIONID'] }}/pickup">
      <button type="submit">End session (Pick up load)</button>
    </form>

    <p><a href="/machine/{{ machine_id }}/start">Cancel</a></p>
  </body>
</html>
